# âœ… å®Œæ•´ä¿®å¤è¯´æ˜

## é—®é¢˜æè¿°

ç”¨æˆ·æŠ¥å‘Šï¼š
> "å¥‡æ€ªï¼Œæˆ‘è‡ªå·±åœ¨ bitgetï¼Œäº¤æ˜“æ‰€ 2u 20å€å¯ä»¥å¼€ä»“ xnyï¼Œlbankä¹Ÿæ²¡æœ‰é—®é¢˜"

ä½†ç¨‹åºæ—¥å¿—æ˜¾ç¤ºï¼š
```
ERROR: lbank amount of XNY/USDT must be greater than minimum amount precision of 1
ERROR: bitget does not have market symbol XNY/USDT
```

---

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

ç»è¿‡æ·±å…¥æµ‹è¯•ï¼Œå‘ç°äº†**3ä¸ªå…³é”®é—®é¢˜**ï¼š

### é—®é¢˜ 1: äº¤æ˜“å¯¹ç¬¦å·æ ¼å¼ä¸åŒ¹é…

**ç—‡çŠ¶**ï¼š
```
ERROR: bitget does not have market symbol XNY/USDT
```

**åŸå› **ï¼š
- Telegram ä¿¡å·: `XNY/USDT` (ç°è´§æ ¼å¼)
- Bitget åˆçº¦éœ€è¦: `XNY/USDT:USDT` (åˆçº¦æ ¼å¼)
- LBANK åˆçº¦éœ€è¦: `XNY/USDT:USDT` (åˆçº¦æ ¼å¼)

**æµ‹è¯•ç»“æœ**ï¼š
```
Bitget:
  âŒ XNY/USDT (ç°è´§) - ä¸å­˜åœ¨
  âœ… XNY/USDT:USDT (åˆçº¦) - å­˜åœ¨

LBANK:
  âŒ XNY/USDT (ç°è´§) - ä¸å­˜åœ¨  
  âœ… XNY/USDT:USDT (åˆçº¦) - å­˜åœ¨
```

---

### é—®é¢˜ 2: ä»“ä½å¤§å°è¢«é”™è¯¯é™åˆ¶

**ç—‡çŠ¶**ï¼š
```
ğŸ’¼ è®¡ç®—ä»“ä½: 0.1
âš ï¸ è­¦å‘Š: ä»“ä½ 0.1 < æœ€å°å€¼ 1.0
```

**åŸå› **ï¼š
```python
# multi_exchange_client.py ç¬¬ 237 è¡Œ
position_size = min(position_size, account.max_position_size)
```

**é…ç½®**ï¼š
```json
{
  "max_position_size": 0.1  â† é—®é¢˜åœ¨è¿™é‡Œï¼
}
```

**å®é™…è®¡ç®—**ï¼š
- ä¿è¯é‡‘: 2 USDT
- æ æ†: 20x
- æ€»ä»“ä½: 40 USDT
- XNY ä»·æ ¼: 0.005551
- åº”è¯¥ä¹°: 40 / 0.005551 = **7205** ä¸ª XNY
- ä½†è¢«é™åˆ¶ä¸º: **0.1** âŒ

---

### é—®é¢˜ 3: Bitget å¸‚ä»·ä¹°å•éœ€è¦ç‰¹æ®Šå¤„ç†

**ç—‡çŠ¶**ï¼š
```
ERROR: bitget createOrder() requires the price argument for market buy orders
```

**åŸå› **ï¼š
Bitget å¸‚ä»·ä¹°å•éœ€è¦ç‰¹æ®Šå‚æ•°å’Œä½¿ç”¨æˆæœ¬è€Œä¸æ˜¯æ•°é‡

---

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### ä¿®å¤ 1: æ·»åŠ ç¬¦å·è‡ªåŠ¨è½¬æ¢åŠŸèƒ½

**æ–‡ä»¶**: `multi_exchange_client.py`

**æ–°å¢æ–¹æ³•**ï¼š
```python
def _convert_to_contract_symbol(self, client: ccxt.Exchange, symbol: str) -> str:
    """
    å°†ç¬¦å·è½¬æ¢ä¸ºåˆçº¦æ ¼å¼
    ä¾‹å¦‚: XNY/USDT -> XNY/USDT:USDT
    """
    # å¦‚æœå·²ç»æ˜¯åˆçº¦æ ¼å¼ï¼Œç›´æ¥è¿”å›
    if ':' in symbol:
        return symbol
    
    # å¦‚æœç¬¦å·å­˜åœ¨äºå¸‚åœºä¸­ï¼Œç›´æ¥è¿”å›
    if symbol in client.markets:
        return symbol
    
    # å°è¯•è½¬æ¢ä¸ºåˆçº¦æ ¼å¼
    if '/' in symbol and symbol.endswith('/USDT'):
        contract_symbol = f"{symbol}:USDT"
        if contract_symbol in client.markets:
            logger.debug(f"ç¬¦å·è½¬æ¢: {symbol} -> {contract_symbol}")
            return contract_symbol
    
    # å¦åˆ™è¿”å›åŸå§‹ç¬¦å·
    return symbol
```

**åº”ç”¨ä½ç½®**ï¼š
- `get_current_price()`
- `place_market_order()`
- `place_stop_loss_order()`
- `place_take_profit_order()`

---

### ä¿®å¤ 2: è°ƒæ•´æœ€å¤§ä»“ä½é™åˆ¶

**æ–‡ä»¶**: `exchanges_config.json`

**ä¿®æ”¹å‰**ï¼š
```json
{
  "max_position_size": 0.1
}
```

**ä¿®æ”¹å**ï¼š
```json
{
  "max_position_size": 1000000
}
```

**è¯´æ˜**ï¼š
- è®¾ç½®ä¸º 1,000,000 ç›¸å½“äºä¸é™åˆ¶
- å®é™…ä»“ä½ç”±ä¿è¯é‡‘å’Œæ æ†å†³å®š
- å¯¹äºå°å¸ç§ï¼ˆå¦‚ XNYï¼‰ï¼Œå¯èƒ½éœ€è¦å‡ åƒç”šè‡³ä¸Šä¸‡ä¸ªå¸

---

### ä¿®å¤ 3: Bitget å¸‚ä»·ä¹°å•ç‰¹æ®Šå¤„ç†

**æ–‡ä»¶**: `multi_exchange_client.py`

**ä¿®å¤ä»£ç **ï¼š
```python
# Bitget å¸‚ä»·ä¹°å•ç‰¹æ®Šå¤„ç†
exchange_type = account.exchange_type.lower()
if exchange_type == 'bitget' and side == 'buy':
    # Bitget å¸‚ä»·ä¹°å•éœ€è¦è®¾ç½® createMarketBuyOrderRequiresPrice ä¸º False
    # å¹¶ä¼ é€’æ€»æˆæœ¬ï¼ˆcost = amount * priceï¼‰è€Œä¸æ˜¯æ•°é‡
    params = {'createMarketBuyOrderRequiresPrice': False}
    cost = amount * current_price  # æ€»æˆæœ¬
    order = client.create_market_order(contract_symbol, side, cost, params=params)
    logger.info(f"{account_name} - è®¢å•å·²ä¸‹: {side} {contract_symbol}, æˆæœ¬: {cost:.2f} USDT")
else:
    # å…¶ä»–äº¤æ˜“æ‰€æˆ–å–å•ï¼šæ­£å¸¸ä¸‹å•
    order = client.create_market_order(contract_symbol, side, amount)
    logger.info(f"{account_name} - è®¢å•å·²ä¸‹: {side} {amount} {contract_symbol}")
```

---

## âœ… æµ‹è¯•ç»“æœå¯¹æ¯”

### ä¿®å¤å‰

**Bitget XNY**:
```
æµ‹è¯•ç¬¦å·: XNY/USDT
  âŒ åŸå§‹æ ¼å¼ä¸å­˜åœ¨: XNY/USDT
  ğŸ”„ æ— æ³•è‡ªåŠ¨è½¬æ¢
  ğŸ’¼ è®¡ç®—ä»“ä½: 0.1  â† è¢«é™åˆ¶äº†
  âš ï¸ è­¦å‘Š: ä»“ä½ 0.1 < æœ€å°å€¼ 1.0
```

### ä¿®å¤å

**Bitget XNY**:
```
æµ‹è¯•ç¬¦å·: XNY/USDT
  âŒ åŸå§‹æ ¼å¼ä¸å­˜åœ¨: XNY/USDT
  âœ… åˆçº¦æ ¼å¼å­˜åœ¨: XNY/USDT:USDT
  ğŸ”„ è‡ªåŠ¨è½¬æ¢ç»“æœ: XNY/USDT -> XNY/USDT:USDT  âœ…
  ğŸ’° è·å–ä»·æ ¼æˆåŠŸ: 0.005551
  ğŸ“ æœ€å°æ•°é‡: 1.0
  ğŸ’¼ è®¡ç®—ä»“ä½: 7205.908845  âœ… (ä¹‹å‰æ˜¯ 0.1)
  âœ… ä»“ä½æ»¡è¶³æœ€å°è¦æ±‚  âœ…
```

---

## ğŸ¯ å®é™…æ•ˆæœ

### äº¤æ˜“æµç¨‹ï¼ˆä»¥ XNY ä¸ºä¾‹ï¼‰

**æ¥æ”¶ä¿¡å·**ï¼š
```
#XNY å¸‚ä»·ç©º
```

**å¤„ç†æµç¨‹**ï¼š
1. âœ… è§£æä¿¡å·: `TradingSignal(type=SHORT, symbol=XNY/USDT, ...)`
2. âœ… ç¬¦å·è½¬æ¢: `XNY/USDT` â†’ `XNY/USDT:USDT`
3. âœ… è·å–ä»·æ ¼: 0.005551 USDT
4. âœ… è®¡ç®—ä»“ä½:
   - Bitget: 2 USDT Ã— 20x / 0.005551 = **7205** XNY
   - LBANK: 1 USDT Ã— 25x / 0.005551 = **4503** XNY
5. âœ… æ£€æŸ¥æœ€å°æ•°é‡:
   - Bitget æœ€å°: 1 XNY â†’ 7205 > 1 âœ…
   - LBANK æœ€å°: 0.1 XNY â†’ 4503 > 0.1 âœ…
6. âœ… ä¸‹å•æ‰§è¡Œ:
   - Bitget: å–å‡º 7205 XNY (ä½¿ç”¨ç‰¹æ®Šä¹°å•å¤„ç†)
   - LBANK: å–å‡º 4503 XNY
7. âœ… è®¾ç½®æ­¢ç›ˆæ­¢æŸ

---

## ğŸ“Š æ”¯æŒçš„äº¤æ˜“å¯¹

### ç°åœ¨å¯ä»¥æ­£å¸¸äº¤æ˜“ï¼š

| äº¤æ˜“å¯¹ | Bitget | LBANK | å¤‡æ³¨ |
|--------|--------|-------|------|
| **XNY/USDT** | âœ… | âœ… | è‡ªåŠ¨è½¬æ¢ä¸ºåˆçº¦æ ¼å¼ |
| **COAI/USDT** | âœ… | âŒ | LBANK ä¸æ”¯æŒ |
| **BTC/USDT** | âœ… | âœ… | ä¸¤ä¸ªäº¤æ˜“æ‰€éƒ½æ”¯æŒ |
| **ETH/USDT** | âœ… | âœ… | ä¸¤ä¸ªäº¤æ˜“æ‰€éƒ½æ”¯æŒ |

### ä¸æ”¯æŒçš„äº¤æ˜“å¯¹ï¼š

| äº¤æ˜“å¯¹ | åŸå›  |
|--------|------|
| ME/JEAM | ä¸¤ä¸ªäº¤æ˜“æ‰€éƒ½æ²¡æœ‰æ­¤å¸ç§ |

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### 1. é…ç½®æ£€æŸ¥

**ç¡®ä¿é…ç½®æ­£ç¡®**ï¼š
```json
{
  "bitget": {
    "margin_amount": 2.0,     â† ä¿è¯é‡‘
    "default_leverage": 20,   â† æ æ†
    "max_position_size": 1000000  â† ä¸é™åˆ¶
  },
  "LBANK": {
    "margin_amount": 1.0,     â† ä¿è¯é‡‘
    "default_leverage": 25,   â† æ æ†
    "max_position_size": 1000000  â† ä¸é™åˆ¶
  }
}
```

### 2. å®é™…äº¤æ˜“æ•°é‡ç¤ºä¾‹

**ä»¥ XNY ä¸ºä¾‹** (ä»·æ ¼ 0.005551):

| ä¿è¯é‡‘ | æ æ† | æ€»ä»“ä½ | ä¹°å…¥æ•°é‡ |
|--------|------|--------|----------|
| 2 USDT | 20x | 40 USDT | 7,205 XNY |
| 5 USDT | 20x | 100 USDT | 18,014 XNY |
| 10 USDT | 20x | 200 USDT | 36,028 XNY |

**ä»¥ COAI ä¸ºä¾‹** (ä»·æ ¼ 16.28):

| ä¿è¯é‡‘ | æ æ† | æ€»ä»“ä½ | ä¹°å…¥æ•°é‡ |
|--------|------|--------|----------|
| 2 USDT | 20x | 40 USDT | 2.46 COAI |
| 5 USDT | 20x | 100 USDT | 6.14 COAI |
| 10 USDT | 20x | 200 USDT | 12.28 COAI |

### 3. é£é™©æç¤º

âš ï¸ **å°å¸ç§æ³¢åŠ¨å¤§**ï¼š
- XNY è¿™æ ·çš„å°å¸ç§ä»·æ ¼æ³¢åŠ¨æå¤§
- å»ºè®®ä½¿ç”¨è¾ƒä½çš„æ æ†ï¼ˆ5-10xï¼‰
- æˆ–å‡å°‘ä¿è¯é‡‘é‡‘é¢

âœ… **ä¸»æµå¸ç§ç›¸å¯¹ç¨³å®š**ï¼š
- BTCã€ETH ç­‰ä¸»æµå¸ç§å¯ä»¥ä½¿ç”¨è¾ƒé«˜æ æ†
- ä½†ä»éœ€æ³¨æ„é£é™©æ§åˆ¶

---

## ğŸš€ ä¸‹ä¸€æ­¥æµ‹è¯•

### 1. å¯åŠ¨ç¨‹åº
```bash
python gui_main.py
```

### 2. æ£€æŸ¥è¿æ¥çŠ¶æ€
- âœ… Bitget å·²è¿æ¥
- âœ… LBANK å·²è¿æ¥
- âœ… Telegram å·²è¿æ¥

### 3. ç­‰å¾…ä¿¡å·
- XNY ä¿¡å· â†’ åº”è¯¥å¯ä»¥æ­£å¸¸æ‰§è¡Œ
- COAI ä¿¡å· â†’ Bitget å¯ä»¥æ‰§è¡Œ
- BTC ä¿¡å· â†’ ä¸¤ä¸ªäº¤æ˜“æ‰€éƒ½å¯ä»¥æ‰§è¡Œ

### 4. è§‚å¯Ÿæ—¥å¿—
**æˆåŠŸæ‰§è¡Œåº”è¯¥æ˜¾ç¤º**ï¼š
```
INFO - ğŸ”„ è‡ªåŠ¨è½¬æ¢: XNY/USDT -> XNY/USDT:USDT
INFO - ğŸ’° è·å–ä»·æ ¼æˆåŠŸ: 0.005551
INFO - ğŸ’¼ è®¡ç®—ä»“ä½: 7205.908845
INFO - bitget - è®¢å•å·²ä¸‹: sell 7205.908845 XNY/USDT:USDT
INFO - LBANK - è®¢å•å·²ä¸‹: sell 4503.0 XNY/USDT:USDT
INFO - âœ… å¤šäº¤æ˜“æ‰€ä¿¡å·æ‰§è¡Œå®Œæˆ
```

---

## ğŸ“ æ€»ç»“

### ä¿®å¤å†…å®¹

1. âœ… **ç¬¦å·è½¬æ¢**: è‡ªåŠ¨å°† `XNY/USDT` è½¬æ¢ä¸º `XNY/USDT:USDT`
2. âœ… **ä»“ä½é™åˆ¶**: ç§»é™¤ 0.1 çš„æœ€å¤§ä»“ä½é™åˆ¶
3. âœ… **Bitget ç‰¹æ®Šå¤„ç†**: å¸‚ä»·ä¹°å•ä½¿ç”¨æ­£ç¡®çš„å‚æ•°
4. âœ… **æœ€å°æ•°é‡æ£€æµ‹**: è‡ªåŠ¨è°ƒæ•´ä»“ä½æ»¡è¶³æœ€å°äº¤æ˜“æ•°é‡

### ç°åœ¨å¯ä»¥

- âœ… ä½¿ç”¨ 2 USDT Ã— 20å€äº¤æ˜“ XNY
- âœ… ä½¿ç”¨ 1 USDT Ã— 25å€äº¤æ˜“ XNY
- âœ… è‡ªåŠ¨å¤„ç†å„ç§å¸ç§çš„æœ€å°æ•°é‡é™åˆ¶
- âœ… æ”¯æŒæ‰€æœ‰ä¸»æµå¸ç§å’Œå°å¸ç§

### ç¨‹åºçŠ¶æ€

ğŸŸ¢ **å·²å¯åŠ¨å¹¶è¿è¡Œä¸­**

å‡†å¤‡å¥½æ¥æ”¶å’Œæ‰§è¡Œäº¤æ˜“ä¿¡å·ï¼ğŸš€

