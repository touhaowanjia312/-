# 🚀 首次启动步骤

## ✅ 已修复的问题

1. ✅ **测试网配置已关闭**
   - LBANK: `testnet: false`
   - bitget: `testnet: false`
   - 配置正确！

2. ✅ **不再显示 binance**
   - 已移除单交易所客户端的自动初始化
   - 现在只使用你配置的 LBANK 和 bitget

3. ⚠️ **需要完成 Telegram 验证**
   - 这是首次连接必需的步骤
   - 只需要验证一次

---

## 📱 现在需要做什么

### 问题：EOF when reading a line
这是因为 Telegram **首次连接需要验证码**，但程序在后台运行无法接收输入。

### 解决方案：前台运行进行验证

---

## 🎯 详细步骤

### Step 1: 打开 PowerShell 或命令提示符

**方法A: 使用 Windows 终端**
```
1. 按 Win + R
2. 输入: cmd 或 powershell
3. 按回车
```

**方法B: 在文件夹中打开**
```
1. 打开文件夹 c:\python\cypto11
2. 在地址栏输入: cmd
3. 按回车
```

### Step 2: 前台运行程序

在终端中输入：
```bash
python gui_main.py
```

**重要：**
- ✅ 不要关闭这个终端窗口
- ✅ GUI 会自动打开
- ✅ 终端保持打开状态

### Step 3: 在 GUI 中启动监听

```
1. GUI 窗口应该已经打开
2. 点击左侧绿色按钮 "▶️ 启动监听"
3. 状态显示 "● 运行中"
```

### Step 4: 切换回终端窗口

**你会看到类似这样的信息：**
```
INFO: 正在启动 Telegram 信号机器人...
INFO: ✓ 成功连接到 LBANK (lbank)
INFO: ✓ 成功连接到 bitget (bitget)
INFO: 正在启动 binance（后备机器人）...
INFO: Connecting to 149.154.167.92:443/TcpFull...
INFO: Connection to 149.154.167.92:443/TcpFull complete!
Please enter the code you received: _
```

**注意：** 最后一行会等待你输入！光标会在这里闪烁。

### Step 5: 获取验证码

```
1. 打开手机 Telegram
2. 查看 Telegram 官方消息
3. 你会收到一条消息，包含 6 位数字验证码
   例如：123456
```

### Step 6: 输入验证码

```
1. 切换到终端窗口
2. 输入验证码（6位数字）
3. 按回车
```

**示例：**
```
Please enter the code you received: 123456
```

### Step 7: 验证成功！

你会看到：
```
INFO: 验证成功
INFO: 正在监听群组消息...
INFO: 机器人已启动 ✓
```

**恭喜！** 现在程序正在运行了！

### Step 8: 测试（可选）

```
1. 在你配置的 Telegram 群组发送测试信号
2. 观察终端日志
3. 查看 GUI 日志面板
4. 确认信号被识别
```

---

## 📊 预期的日志输出

### 启动时
```
INFO: ✓ 成功连接到 LBANK (lbank)
INFO: ✓ 成功连接到 bitget (bitget)
INFO: 配置已加载
INFO: 正在启动 Telegram 信号机器人...
INFO: 连接到 Telegram...
Please enter the code you received: 
```

### 验证成功后
```
INFO: 验证成功
INFO: 正在监听群组消息...
INFO: 机器人已启动
```

### 收到信号时
```
INFO: ✓ 识别到交易信号: BTC/USDT LONG
INFO: 📊 使用多交易所模式执行信号
INFO: 
INFO: 📊 订单计划
INFO: ━━━━━━━━━━━━━━━━━━━━
INFO: 交易对: BTC/USDT
INFO: 方向: 做多
INFO: 入场: 市价
INFO: 止损: 46000
INFO: 止盈:
INFO:   TP1: 50000 (30% 仓位)
INFO:   TP2: 52000 (30% 仓位)
INFO:   TP3: 56000 (40% 仓位)
INFO: 
INFO: 🔄 开始在 2 个交易所执行信号
INFO: 
INFO: 📍 正在 LBANK 执行...
INFO:   仓位大小: 0.1 BTC
INFO:   ✓ 入场订单已执行
INFO:   订单ID: 123456
INFO:   ✓ 止损已设置: 46000
INFO:   ✓ TP1 已设置: 50000 (30% 仓位, 数量: 0.03 BTC)
INFO:   ✓ TP2 已设置: 52000 (30% 仓位, 数量: 0.03 BTC)
INFO:   ✓ TP3 已设置: 56000 (40% 仓位, 数量: 0.04 BTC)
INFO: 
INFO: 📍 正在 bitget 执行...
INFO:   仓位大小: 0.2 BTC
INFO:   ✓ 入场订单已执行
INFO:   ✓ 止损已设置
INFO:   ✓ TP1/TP2/TP3 已设置
INFO: 
INFO: ✅ 多交易所信号执行完成
```

---

## ⚠️ 重要提醒

### 1. 终端窗口要保持打开
验证时，**不要关闭终端窗口**，否则无法输入验证码！

### 2. 验证码有时效
如果验证码过期，重新点击 "启动监听"，会发送新的验证码。

### 3. 只需要验证一次
验证成功后，程序会保存 `trading_bot_session.session` 文件，以后不再需要验证。

### 4. 验证成功后
完成验证后，以后可以：
- 关闭终端，GUI继续运行
- 使用 `start_gui.bat` 直接启动
- 程序会自动连接，不再需要验证

---

## 🔧 如果遇到问题

### 问题1: 没有收到验证码
```
解决：
1. 检查手机网络
2. 确认 Telegram 可以正常接收消息
3. 重新点击 "启动监听"
```

### 问题2: 验证码输入后报错
```
解决：
1. 确认验证码输入正确
2. 确认没有空格
3. 重新获取验证码
```

### 问题3: 连接超时
```
解决：
1. 检查网络连接
2. 关闭代理（如果有）
3. 重试
```

---

## ✅ 快速命令

### 前台运行（用于首次验证）
```bash
cd c:\python\cypto11
python gui_main.py
```

### 停止程序
```bash
taskkill /F /IM python.exe
```

### 查看是否在运行
```bash
tasklist | findstr python
```

---

## 📝 验证成功的标志

✅ 看到这些信息说明成功：
```
INFO: 验证成功
INFO: 机器人已启动
INFO: 正在监听群组消息...
```

✅ Session 文件已生成：
```
c:\python\cypto11\trading_bot_session.session
```

✅ GUI 状态显示：
```
● 运行中 (绿色)
```

---

**现在开始验证吧！** 🚀

只需要 5 分钟，完成后就可以自动跟单了！

